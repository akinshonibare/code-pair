(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{341:function(e,t,a){e.exports=a(736)},346:function(e,t,a){},406:function(e,t,a){},486:function(e,t){},488:function(e,t){},520:function(e,t){},521:function(e,t){},605:function(e,t){},615:function(e,t,a){},616:function(e,t,a){},734:function(e,t,a){},736:function(e,t,a){"use strict";a.r(t);var o=a(0),n=a.n(o),r=a(5),i=a.n(r),c=(a(346),a(338)),s=a(71),l=(a(347),a(321)),u=a(206),m="SET_ROOM_DATA",d="SET_USER_DATA";function p(e){return{type:m,payload:e}}var h={userData:{},roomData:{}};var f=Object(s.c)({pageInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:var a=t.payload;return Object(u.a)({},e,{userData:a});case m:var o=t.payload;return Object(u.a)({},e,{roomData:o});default:return e}}}),g=[l.a];g=s.a.apply(void 0,Object(c.a)(g));var v=Object(s.d)(f,g),b=a(739),k=a(336),y=a(109),E=a.n(y),O=a(204),j=a(30),D=a(31),C=a(35),R=a(32),w=a(36),S=a(34),I=a(741),M=a(738),T=a(740),N=a(147),A=a.n(N);a(403);A.a.initializeApp({apiKey:"AIzaSyDUMCwUCgkZCf4Dec5QQByW2pk3qdTTnmk",authDomain:"code-pair-ec2c8.firebaseapp.com",databaseURL:"https://code-pair-ec2c8.firebaseio.com",projectId:"code-pair-ec2c8",storageBucket:"code-pair-ec2c8.appspot.com",messagingSenderId:"930776554345"});var V=A.a.auth(),L=new A.a.auth.GithubAuthProvider,x=(a(65),a(18)),U=(a(406),a(139)),P=a.n(U),J=function(e){function t(e){var a;return Object(j.a)(this,t),(a=Object(C.a)(this,Object(R.a)(t).call(this,e))).state={data:void 0},a}return Object(w.a)(t,e),Object(D.a)(t,[{key:"componentDidMount",value:function(){var e=this;P.a.get("/api/snippets").then(function(t){e.setState({data:t.data.result})})}},{key:"render",value:function(){return this.state.data?n.a.createElement("div",{className:"landingpage-wrapper"},n.a.createElement(x.a,{style:{width:620},onClick:this.props.onLoginClick},"Enter")):n.a.createElement("div",null)}}]),t}(o.Component),z=(a(234),a(92)),B=(a(737),a(337)),W=(a(475),a(333)),_=(a(477),a(74)),q=a(110),F=(a(235),a(146)),G=(a(236),a(93)),H=(a(124),a(57)),Q=a(326),$=a.n(Q),K=H.a.Group,Y=G.a.Option,Z=function(e){function t(e){var a;return Object(j.a)(this,t),(a=Object(C.a)(this,Object(R.a)(t).call(this,e))).setLanguage=function(e){a.setState({language:e})},a.setRoom=function(){var e={language:a.state.language,roomName:a.state.room};a.props.setRoomData(e),a.props.setModalVisible(!1),a.props.setInRoom(!0)},a.state={language:"python",room:$.a.generate({length:12,charset:"alphabetic"})},a}return Object(w.a)(t,e),Object(D.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement(F.a,{title:"Create Room",visible:this.props.modalVisible,onOk:function(){return e.setRoom()},onCancel:function(){return e.props.setModalVisible(!1)}},n.a.createElement(H.a,{addonBefore:"room",style:{width:"100%"},defaultValue:this.state.room,disabled:!0}),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement(K,{compact:!0},n.a.createElement(G.a,{style:{width:"50%"},defaultValue:this.state.language,onChange:this.setLanguage},["python","javascript"].map(function(e,t){return n.a.createElement(Y,{key:t,value:e},e)}))))}}]),t}(o.Component);var X={setRoomData:p},ee=Object(S.b)(function(e){return{userData:e.pageInfo.userData,roomData:e.pageInfo.roomData}},X)(Z),te=function(e){function t(e){var a;return Object(j.a)(this,t),(a=Object(C.a)(this,Object(R.a)(t).call(this,e))).setRoom=function(e){a.setState({room:e.target.value})},a.getRoom=function(){var e={roomName:a.state.room};a.props.setRoomData(e),a.props.setModalVisible(!1),a.props.setInRoom(!0)},a.state={room:""},a}return Object(w.a)(t,e),Object(D.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement(F.a,{title:"Join Room",visible:this.props.modalVisible,onOk:function(){return e.getRoom()},onCancel:function(){return e.props.setModalVisible(!1)}},n.a.createElement(H.a,{addonBefore:"room",style:{width:"100%"},value:this.state.room,onChange:this.setRoom}))}}]),t}(o.Component);var ae={setRoomData:p},oe=Object(S.b)(function(e){return{userData:e.pageInfo.userData,roomData:e.pageInfo.roomData}},ae)(te),ne=a(328),re=(a(187),a(329)),ie=a.n(re),ce=a(330),se=a.n(ce),le=(a(608),a(610),a(611),a(612),a(613),a(614),a(615),G.a.Option),ue=H.a.Group,me=se()(),de=function(e){function t(e,a){var o;return Object(j.a)(this,t),(o=Object(C.a)(this,Object(R.a)(t).call(this,e,a))).onChange=function(e){o.setState({code:e},function(){return console.log(o.state.code)}),me.emit("coding event",{code:e,room:o.state.room})},o.setTheme=function(e){o.setState({theme:e})},o.updateCodeFromSockets=function(e){o.setState({code:e})},o.updateUsersAndCodeInState=function(e){o.setState({code:e.code,language:e.language})},o.sendUsersAndCode=function(){me.emit("send users and code",{room:o.state.room,code:o.state.code,language:o.state.language})},o.state={language:"javascript",theme:"tomorrow",code:"",room:"",users:[]},me.on("receive code",function(e){return o.updateCodeFromSockets(e.code)}),me.on("load users and code",function(){return o.sendUsersAndCode()}),me.on("receive users and code",function(e){return o.updateUsersAndCodeInState(e)}),o}return Object(w.a)(t,e),Object(D.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({room:this.props.roomData.roomName,language:this.props.roomData.language},function(){return me.emit("room",{room:e.state.room})})}},{key:"componentWillUnmount",value:function(){me.emit("leave room",{room:this.state.room})}},{key:"render",value:function(){var e=this.state,t=e.language,a=e.theme,o=e.code;return n.a.createElement("div",{className:"editor"},n.a.createElement("div",{className:"option"},n.a.createElement(ue,{compact:!0},n.a.createElement(H.a,{style:{width:"75px"},defaultValue:"theme",disabled:!0}),n.a.createElement(G.a,{style:{width:"125px"},defaultValue:this.state.theme,onChange:this.setTheme},["tomorrow","solarized_dark","monokai","github"].map(function(e){return n.a.createElement(le,{key:e,value:e},e)}))),n.a.createElement(x.a,{onClick:this.runCode},"run")),n.a.createElement(ie.a,{mode:t,theme:a,name:"myeditor",onChange:this.onChange,value:o,editorProps:{$blockScrolling:!0},setOptions:{showLineNumbers:!0,tabSize:2,showPrintMargin:!1}}))}}]),t}(o.Component);var pe=Object(S.b)(function(e){return{userData:e.pageInfo.userData,roomData:e.pageInfo.roomData}},{})(de),he=a(331),fe=a.n(he),ge=(a(616),a(617),a(332)),ve=a.n(ge),be=(a(734),function(e){function t(e){var a;return Object(j.a)(this,t),(a=Object(C.a)(this,Object(R.a)(t).call(this))).joinRoom=function(){if(a.state.roomName.trim()){console.log("Joining room '"+a.state.roomName+"'...");var e={name:a.state.roomName};a.state.previewTracks&&(e.tracks=a.state.previewTracks),ve.a.connect(a.state.token,e).then(a.roomJoined,function(e){console.log("Could not connect to Twilio: "+e.message)})}else a.setState({roomNameErr:!0})},a.roomJoined=function(e){console.log("Joined as '"+a.state.identity+"'"),a.setState({activeRoom:e,localMediaAvailable:!0,hasJoinedRoom:!0});var t=a.refs.localMedia;t.querySelector("video")||a.attachParticipantTracks(e.localParticipant,t),t.querySelector("video")||a.attachParticipantTracks(e.localParticipant,t),e.participants.forEach(function(e){console.log("Already in Room: '"+e.identity+"'");var t=a.refs.remoteMedia;a.attachParticipantTracks(e,t)}),e.on("participantConnected",function(e){console.log("Joining: '"+e.identity+"'")}),e.on("trackAdded",function(e,t){console.log(t.identity+" added track: "+e.kind);var o=a.refs.remoteMedia;a.attachTracks([e],o)}),e.on("trackRemoved",function(e,t){a.detachTracks([e])}),e.on("participantDisconnected",function(e){console.log("Participant '"+e.identity+"' left the room"),a.detachParticipantTracks(e)}),e.on("disconnected",function(){a.state.previewTracks&&a.state.previewTracks.forEach(function(e){e.stop()}),a.detachParticipantTracks(e.localParticipant),e.participants.forEach(a.detachParticipantTracks),a.state.activeRoom=null,a.setState({hasJoinedRoom:!1,localMediaAvailable:!1})})},a.detachTracks=function(e){e.forEach(function(e){e.detach().forEach(function(e){e.remove()})})},a.detachParticipantTracks=function(e){var t=Array.from(e.tracks.values());a.detachTracks(t)},a.leaveRoom=function(){a.state.activeRoom.disconnect(),a.setState({hasJoinedRoom:!1,localMediaAvailable:!1})},a.state={identity:null,roomName:"",roomNameErr:!1,previewTracks:null,localMediaAvailable:!1,hasJoinedRoom:!1,activeRoom:null},a}return Object(w.a)(t,e),Object(D.a)(t,[{key:"componentDidMount",value:function(){var e=this;P.a.post("/api/twilio/token",{user:"".concat(this.props.userData.name,"-").concat(this.props.userData.id)}).then(function(t){var a=t.data,o=a.identity,n=a.token;e.setState({identity:o,token:n})}),this.setState({roomName:this.props.roomData.roomName}),console.log(this.state.roomName)}},{key:"attachTracks",value:function(e,t){e.forEach(function(e){t.appendChild(e.attach())})}},{key:"attachParticipantTracks",value:function(e,t){var a=Array.from(e.tracks.values());this.attachTracks(a,t)}},{key:"render",value:function(){var e=this.state.localMediaAvailable?n.a.createElement("div",{className:"wrapper"},n.a.createElement("div",{ref:"localMedia"}),n.a.createElement("div",{ref:"remoteMedia",id:"remote-media"})):"",t=this.state.hasJoinedRoom?n.a.createElement(x.a,{type:"primary",shape:"round",size:"small",onClick:this.leaveRoom},"Leave Video Chat"):n.a.createElement(x.a,{type:"primary",shape:"round",size:"small",onClick:this.joinRoom},"Join Video Chat");return n.a.createElement("div",{className:"wrapper"},t,e)}}]),t}(o.Component));var ke={setRoomData:p},ye=Object(S.b)(function(e){return{userData:e.pageInfo.userData,roomData:e.pageInfo.roomData}},ke)(be),Ee=_.a.Header,Oe=_.a.Footer,je=_.a.Sider,De=_.a.Content,Ce=function(e){function t(e){var a;return Object(j.a)(this,t),(a=Object(C.a)(this,Object(R.a)(t).call(this,e))).toggle=function(){a.setState({collapsed:!a.state.collapsed})},a.onCollapse=function(e){console.log(e),a.setState({collapsed:e})},a.createRoomVisible=function(e){a.setState({createroommodal:e})},a.joinRoomVisible=function(e){a.setState({joinroommodal:e})},a.setInRoom=function(e){a.setState({Inroom:e})},a.confirm=function(e){a.props.onLogoutClick()},a.handleNewUserMessage=function(e){console.log("New message incoming! ".concat(e)),"hi"===e||"hey"===e?Object(q.addResponseMessage)("hello"):"bye"===e?Object(q.addResponseMessage)("goodbye"):Object(q.addResponseMessage)("i dont understand")},a.state={collapsed:!1,Inroom:!1,createroommodal:!1,joinroommodal:!1},a}return Object(w.a)(t,e),Object(D.a)(t,[{key:"componentDidUpdate",value:function(e,t){e.userData!==this.props.userData&&console.log(this.props.userData)}},{key:"render",value:function(){var e=this;return fe.a.isEmpty(this.props.userData)?n.a.createElement("div",null):n.a.createElement("div",{className:"dashboard"},n.a.createElement(_.a,{style:{minHeight:"100vh"}},n.a.createElement(je,{trigger:null,collapsible:!0,collapsed:this.state.collapsed,onCollapse:this.onCollapse},n.a.createElement("div",{className:"logo"},n.a.createElement(W.a,{size:"large",src:this.props.userData.photo})),n.a.createElement("div",null,this.state.Inroom&&n.a.createElement("h3",null,"ROOM ",this.props.roomData.roomName)),n.a.createElement(B.a,{title:"Are you sure you want to log out?",placement:"right",onConfirm:this.confirm,okText:"Yes",cancelText:"No"},n.a.createElement(x.a,{type:"primary",style:{width:"50%",position:"absolute",bottom:"50px",left:"25%"}},"log out"))),n.a.createElement(_.a,null,n.a.createElement(Ee,{style:{background:"#fff",padding:0}},this.state.Inroom&&n.a.createElement(ye,null)),n.a.createElement(De,{style:{margin:"0 16px"}},this.state.Inroom?n.a.createElement(ne.a,{style:{background:"#fff",minHeight:"100%"}},n.a.createElement(pe,null),n.a.createElement("div",null)):n.a.createElement("div",{className:"croom"},n.a.createElement(z.a,{description:n.a.createElement("span",null,"no workspace :("),style:{marginBottom:"10px"}}),n.a.createElement("div",null,n.a.createElement(x.a,{type:"primary",onClick:function(){return e.createRoomVisible(!0)}},"Create Room")," "," / "," ",n.a.createElement(x.a,{type:"primary",onClick:function(){return e.joinRoomVisible(!0)}},"Join Room")))),n.a.createElement(Oe,{style:{textAlign:"center"}},"akin develops \xa92019 Created by Akin Shonibare"))),n.a.createElement(q.Widget,{handleNewUserMessage:this.handleNewUserMessage,title:"chat room",subtitle:""}),n.a.createElement(ee,{modalVisible:this.state.createroommodal,setModalVisible:this.createRoomVisible,setInRoom:this.setInRoom}),n.a.createElement(oe,{modalVisible:this.state.joinroommodal,setModalVisible:this.joinRoomVisible,setInRoom:this.setInRoom}))}}]),t}(o.Component);var Re={setRoomData:p},we=Object(S.b)(function(e){return{userData:e.pageInfo.userData,roomData:e.pageInfo.roomData}},Re)(Ce),Se=function(e){function t(e){var a;return Object(j.a)(this,t),(a=Object(C.a)(this,Object(R.a)(t).call(this,e))).onLoginClick=Object(O.a)(E.a.mark(function e(){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({authLoading:!0}),e.prev=1,e.next=4,V.signInWithPopup(L);case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),console.error(e.t0.message||"error authenticating user."),a.setState({authLoading:!1});case 10:case"end":return e.stop()}},e,this,[[1,6]])})),a.onLogoutClick=Object(O.a)(E.a.mark(function e(){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V.signOut();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0.message||"error signing user out.");case 8:case"end":return e.stop()}},e,this,[[0,5]])})),a.state={authLoading:!0},a}return Object(w.a)(t,e),Object(D.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.authObserver=V.onAuthStateChanged(function(t){if(t){var a={};a.name=t.providerData[0].displayName,a.email=t.providerData[0].email,a.id=t.providerData[0].uid,a.photo=t.providerData[0].photoURL,e.props.setUserData(a)}t?e.props.history.push("/"):e.props.history.push("/login"),e.setState({authLoading:!1})})}},{key:"componentWillUnmount",value:function(){this.authObserver()}},{key:"render",value:function(){var e=this,t=this.state.authLoading;return n.a.createElement(I.a,null,n.a.createElement(M.a,{exact:!0,path:"/",render:function(t){return n.a.createElement(we,Object.assign({onLogoutClick:e.onLogoutClick},t))}}),n.a.createElement(M.a,{exact:!0,path:"/login",render:function(a){return n.a.createElement(J,Object.assign({loading:t,onLoginClick:e.onLoginClick},a))}}))}}]),t}(o.Component);var Ie={setUserData:function(e){return{type:d,payload:e}}},Me=Object(T.a)(Object(S.b)(function(e){return{userData:e.pageData,teamData:e.pageData}},Ie)(Se)),Te=n.a.createElement(k.a,null,n.a.createElement(b.a,null,n.a.createElement(Me,null)));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ne=n.a.createElement(S.a,{store:v},Te);i.a.render(Ne,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[341,1,2]]]);
//# sourceMappingURL=main.a2370a21.chunk.js.map